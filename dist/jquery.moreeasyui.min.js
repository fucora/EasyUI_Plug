/*! jquery-moreeasyui-0.0.1 2019-07-10 */
/*eayui扩展 
1、表单统一取值赋值。
2、表单展示及编辑使用同一套组件。 
 3、扩展了easyui-check和 easyui-radio. 
 4、验证组件 5、文件组组件.
 6、条件显示
 7、展开及折叠*/
function messageralert(t,e,a){e.alertpagejquery.messager.alert("提示信息",t.invalidMessage||t.missingMessage,"info",a)}function GetFieldOpts(t){var e=t.attr("data-opts"),a=t.attr("data-options"),i=t.attr("valname")||t.attr("textfield"),n={valname:i,textfield:i};return e&&(n=$.extend(n,e.GetInstance())),a&&(n=$.extend(n,a.GetInstance())),n}function _getEditors(t){var o=[],e=$(t).find("[class*=editlabel-]");return $(e).each(function(t,e){var a=$(e).attr("valname"),i=$(e).next();(!i||i.length<1)&&(i=$(e));var n=i&&0<i.length?i:$(e),s=n.attr("valname");n&&0<n.length&&a===s&&o.push(n[0])}),o}function _getEditClass(t,e){e=e||"editlabel-";var a=$(t).attr("class");-1<a.indexOf("easyui-validatebox")&&(a=a.replace(/easyui-validatebox/,""));var i=(a=a.substring(a.indexOf(e)+e.length,a.length)).indexOf(" ");return a=-1<i?a.substring(0,i):a}function appendCheckboxOrRadio(o,r,l,t,d,e){t&&(l.formatval&&(d=l.formatval.call(this,d,e,l)),$(t).each(function(t,e){var a="";d?"checkbox"==r&&("string"==typeof d?-1<d.indexOf(e.id):e.id==d)?a='checked="checked"':"radio"==r&&d&&e.id==d&&(a='checked="checked"'):"checked"!=e.checked&&1!=e.checked||(a='checked="checked"'),l.disabled?a+=' disabled="true"':e.disabled&&(a+=' disabled="true"');var i=$('<div class=" '+(l.class?l.class:"")+'"  style="'+(l.style?l.style:"")+'"></div>');l.horizontal&&i.addClass("el-inline");var n=$('<input type="'+r+'" name="'+l.textfield+'" '+a+"/>");n.val(e.id),n.data("checkorradiodata",e.id);var s=$('<span style="padding-left:4px;padding-right:4px;margin-right:5px">'+e.text+"</span>");i.append(n),i.append(s),o.append(i),l.disabled||e.disabled}))}$(function(){function a(t,e){if($(t).css("display",""),$(t).removeClass("easyui-whereshowele"),e){var a="";if(e.whereShowText){var i=a=$(t).text();e.text&&(i=e.text),e.text=e.whereShowText.call(this,i)}if(e.text)if(e.textIsEle){var n=$(t).find(":contains('"+a+"')");n&&0<n.length&&$(n[n.length-1]).text(e.text)}else $(t).text(e.text)}}$(".easyui-whereshowele").each(function(){var t={},e=$.trim($(this).attr("data-options"));if(e){"{"!==e.substring(0,1)&&(e="{"+e+"}");try{t=new Function("return "+e)()}catch(t){console.error("whereshowele 转对象错误：",e)}t.whereShow?t.whereShow.call(this,t)?a(this,t):$(this).remove():!1===t.isShow?$(this).remove():a(this,t)}else a(this)})}),function(r){function n(a){if(r(a).addClass("easyui-foldpanel"),a.opts.contentbar&&r(a).find(a.opts.contentbar).each(function(){r(this).addClass("l-div-content")}),r(a).find(".l-div-content").length<1&&alert("折叠内容层不存大"),a.opts.titlebar&&0<r(a).find(a.opts.titlebar).length)r(a).find(a.opts.titlebar).each(function(){r(this).addClass("l-div-title")});else{var t="";a.opts.titleico&&(t+="background: url("+a.opts.titleico+") 10% 50% no-repeat;");var e=r('<div class="l-div-title" ></div>'),i=r('<div class="plit_title_NewMain" style="'+t+'">'+a.opts.title+"</div>"),n=r('<a href="javascript:;" class="l-btn-iconEx l-btn-slide-up-sm" style=""></a>');e.append(i),e.append(n),r(a).find(".l-div-content").before(e)}var s=a.opts.classArr;function o(){r(a).find("[class*='l-btn-slide']").each(function(t,e){r(e).hasClass(s.slideup)?(r(e).removeClass(s.slideup).addClass(s.slidedown),a.opts.onFold&&a.opts.onFold.call(this),r(a).find(a.opts.contentbar).each(function(t,e){r(e).slideUp("slow")})):(r(e).removeClass(s.slidedown).addClass(s.slideup),a.opts.onOpen&&a.opts.onOpen.call(this),r(a).find(a.opts.contentbar).each(function(t,e){r(e).slideDown("slow")}))})}r(a).find(".l-btn-iconEx").each(function(t,e){a.opts.fold?(r(e).removeClass(s.slideup).addClass(s.slidedown),a.opts.onFold&&a.opts.onFold.call(this),r(a).find(a.opts.contentbar).each(function(t,e){r(e).slideUp("slow")})):(a.opts.onOpen&&a.opts.onOpen.call(this),r(a).find(a.opts.contentbar).each(function(t,e){r(e).slideDown("slow")}),r(e).removeClass(s.slidedown).addClass(s.slideup))}),a.opts.numlogo&&a.opts.numlogocur&&(a.opts.numlogocur>a.opts.numlogo?a.foldpanel("changelogo",String.format("../../Images/"+a.opts.numlogoStateArr[3],a.opts.numlogo)):a.opts.numlogocur===a.opts.numlogo?a.foldpanel("changelogo",String.format("../../Images/"+a.opts.numlogoStateArr[2],a.opts.numlogo)):a.foldpanel("changelogo",String.format("../../Images/"+a.opts.numlogoStateArr[1],a.opts.numlogo))),a.opts.istitlebarclick?r(a.opts.titlebar).click(function(){o()}):r(a).find("[class*='l-btn-iconEx']").click(function(){o()})}r.fn.foldpanel=function(e,t){if("string"==typeof e){var a=r.fn.foldpanel.methods[e];if(a)return a(this,t)}e=e||{};var i=this;return i.opts=r.extend({},r.fn.foldpanel.defaults,e),this.each(function(){var t=r.data(this,"foldpanel");t?r.extend(t.options,e):(r.ajaxSettings.async=!1,i.opts.url&&r.getJSON(i.opts.url,function(t){i.opts.data=t}),r.ajaxSettings.async=!0,t=r.data(this,"foldpanel",{options:r.extend({},r.fn.foldpanel.defaults,r.fn.foldpanel.parseOptions(this),e),initobj:n(i)}))})},r.fn.foldpanel.methods={options:function(t){return r.data(t[0],"foldpanel").options},reload:function(t,e){var a=r.data(t[0],"foldpanel").options;return a=r.extend(a,e),t.opts=a,t.each(function(){r.data(this,"foldpanel",{options:a,initobj:n(t)})})},changelogo:function(t,a){r.data(t[0],"foldpanel").options;r(t).find(".title-logo").each(function(t,e){r(e).attr("src",a)})},setTitle:function(t,a){r.data(t[0],"foldpanel").options;r(t).find(".l-div-title > .plit_title_NewMain").each(function(t,e){r(e).text(a)})},foldcontent:function(t){var e=r.data(t[0],"foldpanel").options;r(t).find(e.contentbar).each(function(t,e){r(e).slideUp("slow")})}},r.fn.foldpanel.parseOptions=function(t){return r.extend({},r.parser.parseOptions(t,[]))},r.fn.foldpanel.defaults={url:null,data:null,fold:!1,istitlebarclick:!1,numlogocur:null,numlogo:null,numlogoStateArr:{1:"gray-{0}.png",2:"orange-{0}.png",3:"green-{0}.png"},classArr:{slideup:"l-btn-slide-up-sm",slidedown:"l-btn-slide-down-sm"},titlebar:".l-div-title",title:"",titleico:"",contentbar:".l-div-content",onFold:function(){},onOpen:function(){}}}(jQuery),$(function(){$(".easyui-foldpanel").each(function(){var t={},e=$.trim($(this).attr("data-options"));e&&("{"!==e.substring(0,1)&&(e="{"+e+"}"),t=new Function("return "+e)(),$(this).foldpanel(t))})}),function(g){function h(t,e){JSON.stringify(t);for(var a in t)if(a===e)return t[a]}function f(a,l,d,u,f,t){if(l.islist){var e=t.find("div[class=filelistdiv]"),c=e&&0<e.length?g(e[0]):null;t.attr("islistrow",u);var p="";c||(c=g('<div class="filelistdiv"></div>')),c.html("");var i=h(d,l.field);i&&0<i.length?g(i).each(function(t,e){for(var a=0;a<l._items.length;a++){var i=l._items[a],n=h(e,i.field);if(i.formatter){var s=g('<div class="fg-grouplist-row"></div'),o=i.formatter(n,e,t,d,u);"string"==typeof o&&-1<o.indexOf("<")&&(o=g(o)),s.append(o);var r=s.find(".fg-delfilebtn");r&&0<r.length&&(f.isShow?r.remove():g(r[0]).data("delfilebtnData",{parentindex:u,rowindex:t,parentRowData:d,rowData:i})),c.append(s)}else p+="<div>"+(t+1)+"、"+n+"<div>"}}):f.isShow?c.append(l.emptyMessageForShow||f.emptyMessageForShow):c.append(l.emptyMessage||f.emptyMessage),(!e||e.length<1)&&t.append(c);var n=t.find("div[class=progressDiv]"),s=n&&0<n.length?g(n[0]):null;s?s.find("span").html(""):(s=g('<div class="progressDiv"><span></span></div>'),t.append(s)),colval=p,t.find(".fg-delfilebtn").each(function(t,e){g(e).click(function(){var t=g(this).data("delfilebtnData");function e(){a.filegridui("deleteChildRow",t),f.onDelFileAfter&&f.onDelFileAfter.call(this,t.parentindex,t.rowindex,a)}f.onDelFile&&f.onDelFile.call(this,t.parentindex,t.rowindex,a),f.delFileConfirmMessage?g.messager.confirm("提示信息",f.delFileConfirmMessage,function(t){t&&e()}):e()})})}}function s(d){d.hasClass("easyui-filegridui")||g(d).addClass("easyui-filegridui");var t=d.opts.data._Items||d.opts.data,e=d.opts.columns,u=d.opts;if(d.html(""),d.opts.onekeydown&&!d.opts.isLockFileDown){var a=g('<button type="button" style="margin-left: 5PX;" class="btn btn-success btn-xs" >资料一键下载</button>');a.click(function(){d.opts.onOneKeyDown&&d.opts.onOneKeyDown.call(this)});var i=g('<span style="float:right;margin-right:10px;"></span>');i.append(a),$onekeydowndiv=g("<div></div>"),d.opts.width&&$onekeydowndiv.css("width",d.opts.width),$onekeydowndiv.append(i),d.append($onekeydowndiv)}var n=g("<table ></table>");d.opts.align&&n.attr("align",d.opts.align),d.opts.width&&n.css("width",d.opts.width),!d.opts.isShow&&d.opts.class&&n.addClass(d.opts.class),d.opts.isShow&&d.opts.classforshow&&n.addClass(d.opts.classforshow),d.opts.style&&n.css(d.opts.style),d.opts.border&&n.attr("border",d.opts.border);var s=g('<tr style="background-color: #EEEEEE"></tr>');g(e).each(function(t,e){g(e).each(function(t,e){var a=e.title;s.append(g('<th style="width:'+(e.width?e.width:u.colwidth)+'">'+a+"</th>"))})}),s=u.header?s:g(""),n.append(s),g(t).each(function(o,r){var l=g("<tr></tr>");g(e).each(function(t,e){g(e).each(function(t,e){var a=o+1;a=e.sortno?o+1:void 0===(a=h(r,e.field))?"":a;var i=g("<td></td>");if(e.attributestr){var n=e.attributestr(a,r,o);i=g("<td "+n+"></td>")}e.formatter&&"string"==typeof(a=e.formatter.call(this,a,r,o))&&-1<a.indexOf("<")&&(a=g(a)),f(d,e,r,o,u,i),a&&i.append(a);var s=i.find(".fg-upfilebtn");s&&0<s.length&&g(s[0]).data("upfilebtnData",{value:a,rowData:r,rowindex:o}),u.isShow&&(g(i).find(".fg-delfilebtn").remove(),g(i).find(".fg-upfilebtn").remove()),e.height&&i.attr("height",e.height),e.width&&i.attr("width",e.width),e.style&&i.attr("style",e.style),e.class&&i.attr("class",e.class),l.append(i)})}),n.append(g(l)),l.find(".fg-upfilebtn").each(function(t,e){var a=r.accept||d.opts.accept||void 0;d.opts.upfilebtnfun(t,e,a,d,r)})}),d.append(n),d.opts.isLockFileDown&&d.find("a").each(function(){g(this).attr("href","javascript:void(0)")})}Number.prototype.filesize=function(){var t=Number(this)/1024;return 1024<=t?1024<=(t=Number(t)/1024)?1024<=(t=Number(t)/1024)?t=(Number(t)/1024).toFixed(2)+"GB":void 0:t=t.toFixed(2)+"MB":t=t.toFixed(2)+"KB"},String.prototype.formatdate=function(t){var e=this,a=null;if(!e)return"";if(""==e)return"";t||(t="yyyy-MM-dd");try{if(e.constructor===String){if("0001/01/01 00:00:00"===(e=e.replace("T"," ").replace(/\-/g,"/").replace(/\.\d+/g,"").replace(/\+08:00/g,"+0800")))return"";a=new Date(e)}else a=e;if(1==a.getFullYear())return""}catch(t){return""}var i={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours()%12==0?12:a.getHours()%12,"H+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(1<RegExp.$1.length?2<RegExp.$1.length?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[a.getDay()+""])),i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t},g.fn.filegridui=function(e,t){if("string"==typeof e){var a=g.fn.filegridui.methods[e];if(a)return a(this,t)}e=e||{};var i=this;return i.opts=g.extend({},g.fn.filegridui.defaults,e),this.each(function(){g.data(this,"filegridui");if(i.opts.url&&(g.ajaxSettings.async=!1,g.getJSON(i.opts.url,{IsItems:!0},function(t){e.data=i.opts.data=t}),g.ajaxSettings.async=!0),e.data||(e.data={_Items:[]}),!i.opts.isFileGroup){var t={};t[i.opts.fileGroupFileListAttr]=e.data[i.opts.fileGroupFileListAttr],e.data=i.opts.data={_Items:[t]}}g.data(this,"filegridui",{options:g.extend({},g.fn.filegridui.defaults,g.fn.filegridui.parseOptions(this),e),initobj:s(i)})})},g.fn.filegridui.methods={options:function(t){return g.data(t[0],"filegridui").options},hasFile:function(t){var a=!1,e=g.data(t[0],"filegridui").options;return g(e.data._Items).each(function(t,e){a||e._Items&&0<e._Items.length&&(a=!0)}),a||g.messager.alert("提示信息",e.hasnoFileMessage),a},isValid:function(t,a){var i=!0,n=g.data(t[0],"filegridui").options;a.stages||(a.stages=[]),a.alertpagejquery=a.alertpagejquery||g;var s=a.stage||n.stage||0;return n.isFileGroup?g(n.data._Items).each(function(t,e){i&&(-1<g.inArray(s,a.stages)?0===e._Items.length&&(a.alertpagejquery.messager.alert("提示信息",n.missingMessage,"info"),i=!1):1===e.GroupParams&&0===e._Items.length&&(a.alertpagejquery.messager.alert("提示信息",String.format(n.missingMessage,e.GroupName),"info"),i=!1))}):-1<g.inArray(s,a.stages)&&(n.data._Items&&n.data._Items[0]._Items&&!(n.data._Items[0]._Items.length<1)||(a.alertpagejquery.messager.alert("提示信息",n.missingMessage,"info"),i=!1)),i},addChildRow:function(t,e){var a=g.data(t[0],"filegridui"),i=a.options;if(i.onlyOneFile){var n=i.data._Items[e.parentindex]._Items;n&&0<n.length&&i.data._Items[e.parentindex]._Items.splice(0,n.length)}i.data._Items[e.parentindex]._Items.push(e.childRowObj),t.opts=i;var s=null;g(i.columns[0]).each(function(t,e){if(e.islist)return s=e,!1}),s||alert("文件组没有List列不能添加行文件！");var o=g(t[0]).find("td[islistrow='"+e.parentindex+"']");f(g(t[0]),s,i.data._Items[e.parentindex],e.parentindex,i,o),a.options=i,g(t[0]).data("filegridui",a)},deleteChildRow:function(t,e){var a=g.data(t[0],"filegridui"),i=a.options;i.data._Items[e.parentindex]._Items.splice(e.rowindex,1),t.opts=i;var n=null;g(i.columns[0]).each(function(t,e){if(e.islist)return n=e,!1}),n||alert("文件组没有List列不能删除文件！");var s=g(t[0]).find("td[islistrow='"+e.parentindex+"']");f(g(t[0]),n,i.data._Items[e.parentindex],e.parentindex,i,s),a.options=i,g(t[0]).data("filegridui",a)},getData:function(t){var e=void 0,a=g.data(t[0],"filegridui");return a&&a.options&&(e=a.options.data,a.options.isFileGroup||(e=e[a.options.fileGroupFileListAttr][0])),e},setData:function(t,e){var a=t,i=g.data(t[0],"filegridui").options;if(!i.isFileGroup){var n={};n[a.opts.fileGroupFileListAttr]=e[a.opts.fileGroupFileListAttr],e={_Items:[n]}}return i.data=e,a.opts=i,t.each(function(){g.data(this,"filegridui",{options:i,initobj:s(a)})})}},g.fn.filegridui.parseOptions=function(t){return g.extend({},g.parser.parseOptions(t,[]))},g.fn.filegridui.defaults={url:null,data:{_Items:[]},colwidth:"20px",align:"center",header:!0,width:"95%",class:"table table-bordered",classforshow:"",style:{width:"95%"},columns:[[{field:"sortnosdf",title:"序号",sortno:!0,width:"60px"},{field:"GroupName",title:"资料类型",width:"260px",formatter:function(t,e,a){if(void 0!==e)return 1===e.GroupParams?'<span style="color: red; margin-right: 4px; margin-bottom: 0px">*'+t+"</span>":2===e.GroupParams?'<span style="color: red; margin-right: 4px; margin-bottom: 0px">'+t+"</span>":t}},{field:"_Items",title:"附件列表",width:410,islist:!0,align:"left",_items:[{field:"AttName",formatter:function(t,e,a,i,n){return"<div><span>"+(a+1)+'、</span><a href="FileDownload.aspx?SouFilePath='+e.SouFilePath+"&FileName="+escape(e.AttName)+'" target="_blank">'+t+'</a>&nbsp;&nbsp;<span style="color:gray">('+e.FileSize.filesize()+")"+e.UploadTime.formatdate("yyyy-MM-dd HH:mm:ss")+'</span>&nbsp;&nbsp;<a delfilebtn="true" rowindex="'+a+'" parentindex="'+n+'"  style="color:red;cursor:pointer">删除</a></div>'}}]},{field:"sortnosdfxx",title:"上传",width:"60px",formatter:function(t,e,a){return'<img id="'+e.GroupID+'" upfilebtn="true" rowindex="'+a+'" groupname="'+e.GroupName+'" fileextlimit="'+e.FileExtLimit+'" filesizelimit="'+e.FileSizeLimit+'" filegridui="'+_this.opts.filegridui+'" src="../Images/uplode.png" style="cursor: pointer" />'}}]],missingMessage:"送审资料：{0}  必须上传资料！",hasnoFileMessage:"请上传资料！",emptyMessage:"请上传附件",emptyMessageForShow:"无",delFileConfirmMessage:"确定要删除该附件吗？",isLockFileDown:!1,isShow:!1,isFileGroup:!0,fileGroupFileListAttr:"_Items",uploaderServer:void 0,onlyOneFile:!1,onekeydown:!1,onDelFile:function(t,e){},onDelFileAfter:function(t,e,a){},onUploadFile:function(t,e,a,i,n){},onUploadSuccess:function(t,e){},onOneKeyDown:function(){},upfilebtnfun:function(t,e,a,i,n){console.debug("请自已实现该方法upfilebtnfun")}}}(jQuery),function(c){function r(){var t=c(this).data("CurData");function e(t){c(t).validatebox("enableValidation").validatebox("isValid")}-1<c.inArray(t.vbopts.stage,t.otherstages)?e(this):c(this).val()&&"0"!==c(this).val()?e(this):c(this).validatebox({novalidate:!0})}function p(t,e,a,i){if(t.hasClass("easyui-textbox")||t.hasClass("easyui-numberbox"))(s=c("input",t.next("span")))&&0<s.length&&(c(s[0]).data("CurData",{otherstages:e.stages,vbopts:a}),i?(r.call(c(s[0])),c(s[0]).focus()):c(s[0]).bind("blur",r));else if(t.hasClass("easyui-combobox")){var n=t.next("span"),s=c("input",t.next("span"));if(-1<c.inArray(a.stage,e.stages)){var o=t.combobox("getValue");o&&"全部"!=o?n.removeClass("textbox-invalid"):i&&(n.addClass("textbox-invalid"),c(s[0]).focus())}}else t.data("CurData",{otherstages:e.stages,vbopts:a}),i?(r.call(t),t.focus()):t.blur(r)}function s(t){var e=!1,a=t.opts;if(!a.novalidate){var i=c(t).find(".easyui-validatebox");if(i&&0<i.length)for(var n=0;n<i.length;n++){var s=c(i[n]),o=s.validatebox("options");if(a.isLableValid){if(s.is("label,span,div")){if((e=!!s.text())&&o.regExpre&&!(e=new RegExp(o.regExpre,"i").test(s.text())))return messageralert(o,a),e;if(!e)return messageralert(o,a),e}}else{if(!1===o.isHiddenValid||s.is(":hidden")&&!(-1<c(s).attr("class").indexOf("easyui-"))&&!a.isHiddenValid)return e=!0;if(s.hasClass("easyui-datebox")){var r=s.next().find(".textbox-value").each(function(){r=s});s.val(r.val());var l=s.next().find(".textbox-text").each(function(){l=s});if(l.val(r.val()),-1<c.inArray(o.stage,a.stages)||l.val()){if(p(l,a,o),!(e=l.validatebox("enableValidation").validatebox("isValid"))){var d=l;return a.alertpagejquery.messager.alert("提示信息",o.invalidMessage||o.missingMessage,"info",function(){p(d,a,o,!0)}),e}}else s.validatebox("disableValidation")}if(s.hasClass("easyui-combobox")||s.hasClass("easyui-combotree")){s.next().find(".textbox-value").each(function(){r=s}).val(),s.next().find(".textbox-text").each(function(){l=s}).val();if(-1<c.inArray(o.stage,a.stages)){var u=s.combobox("getValue");if(!(e=!(!u||"全部"==u))){d=s;return a.alertpagejquery.messager.alert("提示信息",o.invalidMessage||o.missingMessage,"info",function(){p(d,a,o,!0)}),e}}else s.validatebox("disableValidation");if(s.hasClass("easyui-combotree"))return e}if(s.hasClass("easyui-checkbox")){var f="";if(c.each(s.find("input:checkbox:checked"),function(){f+=s.val()+","}),-1<c.inArray(o.stage,a.stages)){if(!(e=!!f))return messageralert(o,a),e}else s.validatebox("disableValidation")}if(s.hasClass("easyui-radio")){f=s.find("input:checked").val();if(-1<c.inArray(o.stage,a.stages)){if(!(e=!!f)){d=s;return a.alertpagejquery.messager.alert("提示信息",o.invalidMessage||o.missingMessage,"info",function(){p(d,a,o,!0)}),e}}else s.validatebox("disableValidation")}if(s.hasClass("easyui-filegridui"))if(-1<c.inArray(o.stage,a.stages))if(!(e=s.filegridui("isValid",{stage:o.stage,stages:a.stages,alertpagejquery:a.alertpagejquery})))return e;if(s.is("label,span,div")){if(!s.hasClass("easyui-filegridui")&&!s.hasClass("easyui-radio")&&!s.hasClass("easyui-checkbox")){if((e=!!s.text())&&o.regExpre&&!(e=new RegExp(o.regExpre,"i").test(s.text())))return messageralert(o,a),e;if(!e&&!s.is(":hidden"))return messageralert(o,a),e}}else if(-1<c.inArray(o.stage,a.stages)){if(!(e=s.validatebox("enableValidation").validatebox("isValid"))){d=s;return a.alertpagejquery.messager.alert("提示信息",o.invalidMessage||o.missingMessage,"info",function(){p(d,a,o,!0)}),e}}else if(s.val()&&"0"!==s.val()){if(!(e=s.validatebox("enableValidation").validatebox("isValid")))return messageralert(o,a),e}else s.validatebox("disableValidation")}}}return e}c.fn.validateform=function(t,e){if("string"==typeof t){var a=c.fn.validateform.methods[t];if(a)return a(this,e)}t=t||{};var i=this;return i.opts=c.extend({},c.fn.validateform.defaults,t),this.each(function(){c.data(this,"validateform");c.data(this,"validateform",{options:c.extend({},c.fn.validateform.defaults,c.fn.validateform.parseOptions(this),t),initobj:function(t){c(t).addClass("easyui-validateform");var i=t.opts;i&&c(t).find(".easyui-validatebox").each(function(){c(this).validatebox();var t=c(this).validatebox("options");if(c(this).hasClass("easyui-datebox")){var e=c(this).next().find(".textbox-value").each(function(){e=c(this)});c(this).val(e.val());var a=c(this).next().find(".textbox-text").each(function(){a=c(this)});a.val(e.val()),a.blur(function(){c(this).val(c(this).next().val()),-1<c.inArray(t.stage,i.stages)||c(this).val()?c(this).validatebox("enableValidation").validatebox("validate"):c(this).validatebox("disableValidation")})}else p(c(this),i,t);t.stage||(t.stage=1),c(this).validatebox(t)})}(i)})})},c.fn.validateform.methods={options:function(t){return c.data(t[0],"validateform").options},validateform:function(t,e){var a=[],i=c;e.constructor==Array?a=e:(a=e.stages,i=e.alertpagejquery);var n=c.data(t[0],"validateform").options;return a&&0<a.length&&(n.stages=a),i&&(n.alertpagejquery=i),t.opts=n,s(t)},validateformlable:function(t,e){var a=[],i=c;e.constructor==Array?a=e:(a=e.stages,i=e.alertpagejquery);var n=c.data(t[0],"validateform").options;return a&&0<a.length&&(n.stages=a),i&&(n.alertpagejquery=i),n.isLableValid=!0,t.opts=n,s(t)}},c.fn.validateform.parseOptions=function(t){return c.extend({},c.parser.parseOptions(t,[]))},c.fn.validateform.defaults={stages:[1],isAlert:!0,novalidate:!1,isLableValid:!1,isHiddenValid:!1,alertpagejquery:c}}(jQuery),$(function(){$(".easyui-validateform").each(function(){var t={},e=$.trim($(this).attr("data-options"));e&&("{"!=e.substring(0,1)&&(e="{"+e+"}"),t=new Function("return "+e)(),$(this).validateform(t))}),void 0!==$.fn.validatebox&&$.extend($.fn.validatebox.defaults.rules,{choice:{validator:function(t,e){var a=!1;return t&&"0"!=t&&(a=!0),a},message:"此为必选项！"},minLength:{validator:function(t,e){return t.length>=e[0]},message:"最少输入 {0} 个字符"},maxLength:{validator:function(t,e){return t.length<=e[0]},message:"最多输入 {0} 个字符"},maxLengthJoin:{validator:function(t,e){return t.length<=e[0]},message:"最多输入 {0} 个字符"},phone:{validator:function(t){return/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/i.test(t)},message:"格式不正确,请使用下面格式:028-88888888"},mobile:{validator:function(t){return/^(13|15|18|17)\d{9}$/i.test(t)},message:"手机号码格式不正确"},telNumber:{validator:function(t){return/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/.test(t)||/^(\d{7,8})(-(\d{3,}))?$/.test(t)},message:"电话号码格式不正确"},phoneAndMobile:{validator:function(t){return t=$.trim(t),/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/i.test(t)||/^(13|15|18|11|17|12|14|16|19)\d{9}$/i.test(t)},message:"电话号码或手机号码格式不正确"},idcard:{validator:function(t,e){switch(t=$.trim(t),$(e[0]).combobox("getValue")){case"大陆身份证":return/^\d{15}(\d{2}[A-Za-z0-9])?$/i.test(t)||/^\d{18}(\d{2}[A-Za-z0-9])?$/i.test(t);case"香港身份证":return/^[HMhm]{1}([0-9]{10}|[0-9]{8})$/i.test(t);case"护照":return/^[a-zA-Z]{5,17}$/i.test(t);case"军官证":return/南字第(\d{8})号|北字第(\d{8})号|沈字第(\d{8})号|兰字第(\d{8})号|成字第(\d{8})号|济字第(\d{8})号|广字第(\d{8})号|海字第(\d{8})号|空字第(\d{8})号|参字第(\d{8})号|政字第(\d{8})号|后字第(\d{8})号|装字第(\d{8})号/i.test(t);case"澳门身份证":return/^[HMhm]{1}([0-9]{10}|[0-9]{8})$/i.test(t);case"台湾身份证":return/^[0-9]{8}$/i.test(t)||/^[0-9]{10}$/i.test(t)}},message:"身份证号码格式不正确"},idcarddalu:{validator:function(t){return t=$.trim(t),/^\d{15}(\d{2}[A-Za-z0-9])?$/i.test(t)||/^\d{18}(\d{2}[A-Za-z0-9])?$/i.test(t)},message:"身份证号码格式不正确"},nonumber:{validator:function(t){return!/^\d+$/i.test(t)},message:"不允许输入数字"},number:{validator:function(t){return/^\d+$/i.test(t)},message:"请输入数字"},numberletter:{validator:function(t){return/^[A-Za-z0-9]+$/i.test(t)},message:"请输入字母或数字"},numberletterhyphen:{validator:function(t){return/^[A-Za-z0-9/-]+$/i.test(t)},message:'请输入字母或数字或"-"'},noeqzero:{validator:function(t){return 0!=parseFloat(t)},message:"请输入非零数字"},gtzero:{validator:function(t){return 0<parseFloat(t)},message:"请输入大于零的数字"},gtelzero:{validator:function(t){return 0<=parseFloat(t)},message:"请输入大于等于零的数字"},intOrFloat:{validator:function(t){return/^\d+(\.\d+)?$/i.test(t)},message:"请输入数字，并确保格式正确"},currencyNum:{validator:function(t){return/^[0-9]+([.]{1}[0-9]+){0,1}$/i.test(t)},message:"输入格式不正确"},currency:{validator:function(t){return/^\d+(\.\d+)?$/i.test(t)},message:"货币格式不正确"},ltInNum:{validator:function(t,e){return parseFloat(t)<=parseFloat($(e[0]).val())},message:"此数字必须小于等于立项金额！"},JJQltInNum:{validator:function(t,e){return parseFloat(t)>=parseFloat($(e[0]).val())},message:"此数字必须大于等于送审金额！"},datetimeltInEndtime:{validator:function(t,e){return!$(e[0]).val()||new Date(t)>=new Date($(e[0]).val())},message:"结束日期不能小于开始日期！"},datetimeltInStarttime:{validator:function(t,e){var a=$(e[0]).val();return!a||new Date(t)<=new Date(a)},message:"开始日期不能大于结束日期！"},JSltInNum:{validator:function(t,e){return parseFloat(t)<=parseFloat(e)},message:"此分值应不能超过限额！"},equals:{validator:function(t,e){for(var a=0;a<e.length;a++)if(t==$(e[a]).val())return!1;return!0},message:"不能含有相同经营品牌"},LSLBltInNum:{validator:function(t,e){return parseFloat(t)<=1.1*parseFloat($(e[0]).val())},message:"不能超过资金下达金额的10%！"},gtInNum:{validator:function(t,e){return parseFloat(t)>=parseFloat($(e[0]).val())},message:"此数字必须大于等于前者！"},qq:{validator:function(t){return/^[1-9]\d{4,9}$/i.test(t)},message:"QQ号码格式不正确"},integer:{validator:function(t){return/^[+]?[1-9]+\d*$/i.test(t)},message:"请输入正整数"},integerOrZero:{validator:function(t){return/^[+]?[0-9]+\d*$/i.test(t)},message:"请输入0或正整数"},chinese:{validator:function(t){return/^[\u0391-\uFFE5]+$/i.test(t)},message:"请输入中文"},chineseAndLength:{validator:function(t){var e=$.trim(t).length;if(e>=param[0]&&e<=param[1])return/^[\u0391-\uFFE5]+$/i.test(t)},message:"请输入中文"},english:{validator:function(t){return/^[A-Za-z]+$/i.test(t)},message:"请输入英文"},englishAndLength:{validator:function(t,e){var a=$.trim(t).length;if(a>=e[0]&&a<=e[1])return/^[A-Za-z]+$/i.test(t)},message:"请输入英文"},englishUpperCase:{validator:function(t){return/^[A-Z]+$/.test(t)},message:"请输入大写英文"},Email:{validator:function(t){var e=/^[a-z\d]+(\.[a-z\d]+)*@([\da-z](-[\da-z])?)+(\.{1,2}[a-z]+)+$/.test(t),a=new String(t.split("@")[1]),i=a.indexOf("."),n=a.length,s=new String(a).substring(i,n);return".com|.com.cn|.net|.cn".indexOf(s)<0&&(e=!1),e},message:"电子邮箱格式不正确"},gtMinDate:{validator:function(t){new Date(t);return new Date(t)>new Date("1900-01-01")},message:"请选择大于最小日期"},md:{validator:function(t,e){var a=$.fn.datebox.defaults.parser(e[0]);return $.fn.datebox.defaults.parser(t)<=a},message:"The date must be less than or equals to {0}."},unnormal:{validator:function(t){return/.+/i.test(t)},message:"输入值不能为空和包含其他非法字符"},username:{validator:function(t){return/^[a-zA-Z][a-zA-Z0-9_]{3,12}$/i.test(t)},message:"用户名不合法（字母开头，允许4-12字节，允许字母数字下划线）"},usernameEx:{validator:function(t){return/^[a-zA-Z][a-zA-Z0-9_]{3,11}$/i.test(t)},message:"用户名不合法（字母开头，允许4-12字节，允许字母数字下划线）"},usernameLoginID:{validator:function(t){return/^[a-zA-Z][a-zA-Z0-9_]{3,11}$/i.test(t)},message:"登录名不合法（字母开头，允许4-12字节，允许字母数字下划线）"},LoginID:{validator:function(t){return/^[a-zA-Z][a-zA-Z0-9]{5,17}$/i.test(t)},message:"登录名为6~18位数字或字母组合"},LoginName:{validator:function(t){return/^[a-zA-Z][a-zA-Z0-9]{3,11}$/i.test(t)},message:"登录名格式不正确！"},LoginNameEx:{validator:function(t){return/^[\u4E00-\u9FA5\w-a-zA-Z0-9_]{2,14}$/i.test(t)},message:"登录名格式不正确！"},password:{validator:function(t){return!!/^[\w\u4e00-\u9fa5]+$/gi.test(t)&&/^[a-zA-Z0-9]{4,14}$/i.test(t)},message:"密码格式不正确！"},password1:{validator:function(t){return/^[a-zA-Z][a-zA-Z0-9]{3,15}$/i.test(t)},message:"密码为4~16位数字或字母组合"},faxno:{validator:function(t){return/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/i.test(t)},message:"传真号码不正确"},zip:{validator:function(t){return/^[0-9]\d{5}$/i.test(t)},message:"邮政编码格式不正确"},ip:{validator:function(t){return/(?:(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))/.test(t)},message:"IP地址格式不正确"},name:{validator:function(t){return/^[\u0391-\uFFE5]+$/i.test(t)|/^\w+[\w\s]+\w+$/i.test(t)},message:"请输入姓名"},engOrChinese:{validator:function(t){return/^[\u0391-\uFFE5]+$/i.test(t)|/^\w+[\w\s]+\w+$/i.test(t)},message:"请输入中文"},engOrChineseAndLength:{validator:function(t){var e=$.trim(t).length;if(e>=param[0]&&e<=param[1])return/^[\u0391-\uFFE5]+$/i.test(t)|/^\w+[\w\s]+\w+$/i.test(t)},message:"请输入中文或英文"},carNo:{validator:function(t){return/^[\u4E00-\u9FA5][\da-zA-Z]{6}$/.test(t)},message:"车牌号码无效（例：川B12350）"},carenergin:{validator:function(t){return/^[a-zA-Z0-9]{16}$/.test(t)},message:"发动机型号无效(例：FG6H012345654584)"},same:{validator:function(t,e){var a=$(e[0]).val()||$(e[0]).textbox("getValue");return!a||!t||a==t},message:"两次输入的密码不一致!"},selectValueRequired:{validator:function(t,e){return!(""==t||0<=t.indexOf("请选择"))||($(this).trigger("focus"),!1)},message:"该下拉框为必选项"},OrganCode:{validator:function(t,e){if("/"==t)return!0;for(var a=[3,7,9,10,5,8,4,2],i=0,n=0;n<8;n++)i+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(t.charAt(n))*a[n];var s=11-i%11;return s=10==s?"X":s,!!/^([0-9A-Z]){8}-[0-9a-zA-Z|X|*]$/.test(t)||!(!/^([0-9A-Z]){8}-[0-9|X]$/.test(t)||s==t.charAt(9))},message:"企业代码不正确，请输入正确的企业代码"},OrganCodeEx:{validator:function(t,e){for(var a=[3,7,9,10,5,8,4,2],i=/^([0-9A-Z]){8}-[0-9|X]$/,n=0,s=0;s<8;s++)n+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(t.charAt(s))*a[s];var o=11-n%11;if(o=10==o?"X":o,/^([0-9A-Z]){8}-[0-9a-zA-Z|X|*]$/.test(t))return!0;if(i.test(t)&&o!=t.charAt(9))return!0;var r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","T","U","W","X","Y","0"],l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],d=[1,3,9,27,19,26,16,17,20,29,25,13,8,24,10,30,28];i=/^[0-9ABCDEFGY][1239]\d{6}([0-9ABCDEFGHJKLMNPQRTUWXY]{9})([0-9A-Z])$/;if(0!=t.length){if(i.test(t)){if({11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"}[t.substr(2,2)]){t=t.split("");for(n=0,s=0;s<17;s++)n+=l[r.indexOf(t[s])]*d[s];return r[31-n%31]==t[17]}return!1}return!1}},message:"企业代码不正确，请输入正确的企业代码"},SocityOrganCode:{validator:function(t,e){if("/"==t)return!0;if(/^([0-9A-Z]){18}$/.test(t))return!0;var a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","T","U","W","X","Y","0"],i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],n=[1,3,9,27,19,26,16,17,20,29,25,13,8,24,10,30,28];if(0!=t.length){if(/^[0-9ABCDEFGY][1239]\d{6}([0-9ABCDEFGHJKLMNPQRTUWXY]{9})([0-9A-Z])$/.test(t)){if({11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"}[t.substr(2,2)]){t=t.split("");for(var s=0,o=0;o<17;o++)s+=i[a.indexOf(t[o])]*n[o];return a[31-s%31]==t[17]}return!1}return!1}},message:"社会信用代码不正确，请输入正确的代码"},ProjectCode:{validator:function(t,e){return!!(e[0]||"^S+〔S+〕S+号$").test(t)},message:"请将立项文号填写完整!"},exceptChar:{validator:function(t,e){for(var a=0;a<e.length;a++)if(0<=t.indexOf(e[a]))return $.fn.validatebox.defaults.rules.exceptChar.message="输入不正确，请不要包含 "+e.join(" ")+" 字符",!1;return!0},message:""}})}),function(r){Array.prototype.GetTextById=function(a){var i="";return r(this).each(function(t,e){e.id!==parseInt(a)||(i=e.text)}),i},String.prototype.GetInstance=function(t){var e=null,a=this;if(a){"{"!==a.substring(0,1)&&(a="{"+a+"}");try{e=new Function("return "+a)()}catch(t){console.info("转对象报错了："+a)}}return e},String.prototype.GetInstanceEx=function(t){var e=this;e=e.split(",")[0];var a={},o=t,i=e.lastIndexOf(".");if(0<i){var n=e.substr(0,i);if(void 0===a[n]){var s=e.split(".");s.splice(-1),r.each(s,function(t,e){if(null==o)return!1;var a=e,i=e.indexOf("[");if(0<i&&"]"==e[e.length-1]){if(a=e.substr(0,i),null==(o=o[a]))return!1;var n=e.substr(i+1,e.length-i-2);if(r.isNumeric(n))o=o[n];else{expStrArr=n.split("=");var s=null;if(r.each(o,function(t,e){if(e[expStrArr[0]]==expStrArr[1])return s=e,!1}),!(o=s))return!1}}else o=o[a]}),a[s.join(".")]=o}o=a[n]}return(o||{})[0<i?e.substr(i+1):e]},Date.prototype.Format=function(t){var e=null;if(!this)return"";t||(t="yyyy-MM-dd");try{if("string"==typeof this){var a=this.replace("T"," ").replace(/\-/g,"/").replace(/\.\d+/g,"");if("0001/01/01 00:00:00"===a)return"";e=new Date(a)}else e=this;if(1==e.getFullYear())return""}catch(t){return""}var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours()%12==0?12:e.getHours()%12,"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(t)&&(t=t.replace(RegExp.$1,(1<RegExp.$1.length?2<RegExp.$1.length?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[e.getDay()+""])),i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}}(jQuery),$.fn.bindViewValByAtr=function(s,o,r,l){$(this).find("*["+o+"]").each(function(){var t=$(this),e=t.attr(l),a=t.attr(o).GetInstanceEx(s);if(!GetFieldOpts(t).showonly){if(!t.is("select")&&!t.is(".combobox-f")&&r&&t.attr(l)){var i=e.GetInstanceEx(r);i&&0<i.length&&(a=i.GetTextById(a)||a)}if(null!=a&&void 0!==a&&"0001-1-1"!=a)if(t.is(".combobox-f")){var n=t.combobox("options");t.combobox(n.multiple?"setValues":"select",a)}else t.is(".datebox-f")?"1901-01-01T00:00:00"==a||"0001-01-01T00:00:00"==a?t.datebox("setValue",""):t.datebox("setValue",a):t.is(".textbox-f")?t.textbox("setValue",a):t.is("select")?(t.find("option:contains('"+a+"')").attr("selected",!0),t.find("option[value='"+a+"']").attr("selected",!0)):t.is(":input")?t.val(a):t.text(a)}})},$.fn.bindOptionDataByName=function(i,n){n=n||"name",$(this).find("*["+n+"]").each(function(){var a=$(this),t=a.attr(n).GetInstanceEx(i);if(!GetFieldOpts(a).showonly&&null!=t&&void 0!==t&&"0001-1-1"!=t)if(a.is(".combobox-f")){var e=a.combobox("options");e.firstoption&&(t=$.merge([e.firstoption],t)),a.combobox({valueField:"id",textField:"text",data:t})}else $(t).each(function(t,e){a.append('<option value="'+e.id+'">'+e.text+"</option>")})})},$.fn.bindViewDataByName=function(n,s){s=s||"name";$(this).find("*["+s+"]").each(function(){var t=$(this),e=t.attr(s),a=e.GetInstanceEx(n);if(null!=(a=(tmpData||{})[0<dotIdx?e.substr(dotIdx+1):e])&&void 0!==a&&"0001-1-1"!=a)if(t.is(".combobox-f")){var i=t.combobox("options");t.combobox(i.multiple?"setValues":"select",a)}else t.is(".datebox-f")?t.datebox("setValue",a):t.is(".textbox-f")?t.textbox("setValue",a):t.is("select")?t.find("option[value='"+a+"']").attr("selected",!0):t.is(":input")?t.val(a):t.text(a)}),$(this).data("formdata",n)},function(r){function n(t){var e=t.opts.data._Items||t.opts.data,a=t.opts;appendCheckboxOrRadio(t,"checkbox",a,e,a.value),t.opts.onLoadSuccess&&t.opts.onLoadSuccess.call(this,e,t,t.opts.editable)}r.fn.checkbox=function(e,t){if("string"==typeof e){var a=r.fn.checkbox.methods[e];if(a)return a(this,t)}e=e||{};var i=this;return i.opts=r.extend({},r.fn.checkbox.defaults,e),this.each(function(){r.data(this,"checkbox");r.ajaxSettings.async=!1,i.opts.url&&r.getJSON(i.opts.url,function(t){e.data=i.opts.data=t}),r.ajaxSettings.async=!0,r.data(this,"checkbox",{options:r.extend({},r.fn.checkbox.defaults,r.fn.checkbox.parseOptions(this),e),initobj:n(i)})})},r.fn.checkbox.methods={options:function(t){return r.data(t[0],"checkbox").options},getValue:function(t){var i=r.data(t[0],"checkbox").options,n=i.retIsArr?[]:"",s=i.space||",",o=r(t[0]).find("input:checkbox:checked");return r.each(o,function(t,e){if(i.retIsArr){var a=r(this).data("checkorradiodata");n.push(a||r(this).val())}else n+=r(this).val()+(o.length==t+1?"":s)}),n},reload:function(t,e){var a=r.data(t[0],"checkbox").options;return a=r.extend(a,e),t.opts=a,t.each(function(){r.data(this,"checkbox",{options:a,initobj:n(t)})})}},r.fn.checkbox.parseOptions=function(t){return r.extend({},r.parser.parseOptions(t,[]))},r.fn.checkbox.defaults={url:null,data:{}}}(jQuery),$(function(){$(".easyui-checkbox").each(function(){var t={},e=$.trim($(this).attr("data-options"));if(e){"{"!==e.substring(0,1)&&(e="{"+e+"}");try{t=new Function("return "+e)()}catch(t){console.info("easyui-checkbox对象报错了："+e)}$(this).checkbox(t)}})}),function(n){function s(t){var e=t.opts.data._Items||t.opts.data,a=t.opts;appendCheckboxOrRadio(t,"radio",a,e,a.value),t.opts.onLoadSuccess&&t.opts.onLoadSuccess.call(this,e,t,t.opts.editable)}n.fn.radio=function(e,t){if("string"==typeof e){var a=n.fn.radio.methods[e];if(a)return a(this,t)}e=e||{};var i=this;return i.opts=n.extend({},n.fn.radio.defaults,e),this.each(function(){n.data(this,"radio");n.ajaxSettings.async=!1,i.opts.url&&n.getJSON(i.opts.url,function(t){e.data=i.opts.data=t}),n.ajaxSettings.async=!0,n.data(this,"radio",{options:n.extend({},n.fn.radio.defaults,n.fn.radio.parseOptions(this),e),initobj:s(i)})})},n.fn.radio.methods={options:function(t){return n.data(t[0],"radio").options},getValue:function(t){n.data(t[0],"radio").options;var e=null,a=n(t[0]).find("input:radio:checked");return a&&0<a.length&&(e=n(a[0]).val()),e},reload:function(t,e){var a=n.data(t[0],"radio").options;return a=n.extend(a,e),t.opts=a,t.each(function(){n.data(this,"radio",{options:a,initobj:s(t)})})}},n.fn.radio.parseOptions=function(t){return n.extend({},n.parser.parseOptions(t,[]))},n.fn.radio.defaults={url:null,data:{}}}(jQuery),$(function(){$(".easyui-radio").each(function(){var t={},e=$.trim($(this).attr("data-options"));if(e){"{"!==e.substring(0,1)&&(e="{"+e+"}");try{t=new Function("return "+e)()}catch(t){console.info("easyui-radio对象报错了："+e)}$(this).radio(t)}})}),function(p){var g=["textbox","passwordbox","maskedbox","combo","combobox","combotree","combogrid","combotreegrid","tagbox","numberbox","datebox","datetimebox","datetimespinner","calendar","spinner","numberspinner","timespinner","slider","filebox","checkbox","radio"],h=["datebox","datetimebox","datetimespinner","calendar"],v=["filegridui","custom"],m=["input","input-btntext","textarea","password","select"],b={input:"textbox","input-btntext":"textbox",textarea:"textbox",password:"textbox",select:"combobox"};function x(t){return t&&-1===t.indexOf(":")&&(t+="T00:00:00"),t||(t="0001-01-01T00:00:00"),t}function y(t,e,a){if(t.opts.isMustFillStyle&&a.required&&t.opts.editable){var i=null;(i=a.mustFillLabel?p(a.mustFillLabel):t.opts.mustFillSelector.call(e))&&(i.prepend(t.opts.mustFillEle),i.addClass("el-title"),t.opts.mustFillClass&&i.addClass(t.opts.mustFillClass))}}function n(f){f.opts.validateform&&!f.hasClass("easyui-validateform")&&p(f).addClass("easyui-validateform");var c=f.opts.data._Items||f.opts.data;f.opts.columns,f.opts;if(p(f).find(".editlabel-filegridui").each(function(){f.opts.validateform&&f.opts.editable&&p(this).addClass("easyui-validatebox");var t=GetFieldOpts(p(this));t.isShow=t.isShow||!f.opts.editable,t.data||t.url||!t.textfield||(t.data=t.textfield.GetInstanceEx(c)),!f.opts.editable&&t.required&&(t.required=!1),p(this).filegridui(t),f.opts.editable&&y(f,p(this),t)}),f.opts.editable){var t=p(f).find("[class*=editlabel-]");p(t).each(function(t,e){var a=null,i=o=_getEditClass(e);if(-1<p.inArray(o,m)&&(a="password"==o?o:null,o=b[o]),-1<p.inArray(o,g)){var n=GetFieldOpts(p(e));if(n.showonly){p(e).show(),p(e).css("word-break","break-all");var s=n.textfield.GetInstanceEx(c),o=_getEditClass(e);if(-1<p.inArray(o,h)&&(s=new Date(x(s))),p(e).val(s),n.formatter){var r=n.formatter.call(this,s,c,n,p(this));"string"==typeof r?p(e).html(r):(p(e).html(""),p(e).append(r))}else p.inArray(o,v)<0&&p(e).html(s);y(f,p(e),n)}else{var l="easyui-"+o,d=p('<input type="'+(a=a||"text")+'" class="'+l+'" required style="width: 100%; margin-right: 5px; display: inline" />');"combobox"==o&&(d=p('<select class="easyui-combobox"></select>')),"checkbox"!=o&&"radio"!=o||(d=p('<div class="'+l+'" ></div>'));var u=function(t,e){var a=t.attr("valname"),i=t.attr("placeholder"),n=t.attr("data-options"),s=t.attr("data-opts"),o=t.attr("optionsdata");a&&e.attr("valname",a),i&&e.attr("placeholder",i),n&&e.attr("data-options",n),s&&e.attr("data-opts",s),o&&e.attr("optionsdata",o);var r=GetFieldOpts(t);if(r.editorid)e.attr("id",r.editorid);else{var l=t.attr("id");l&&e.attr("id",l+"_editor")}return r.class&&e.addClass(r.class),r}(p(this),d);if(f.opts.validateform&&d.addClass("easyui-validatebox"),"checkbox"==o||"radio"==o){d.validatebox();u.data;!u.data&&f.opts.optionsdatasou&&u.optionsdata&&u.optionsdata.GetInstanceEx(f.opts.optionsdatasou);u.textfield&&u.textfield.GetInstanceEx(c)}p(e).hide(),p(e).after(d),"password"==a&&p.extend(u,{width:u.width?u.width:"99.5%"}),"combobox"==o&&(p.extend(u,{width:u.width?u.width:"99.5%",onChange:function(t,e){!function(t,e){t.getVal?t.valfield?t.getVal.call(this,f.opts.data,e,f.data("valfield_"+t.valfield)):t.getVal.call(this,f.opts.data,e):(f.opts.data[t.textfield]=e,t.valfield&&(f.opts.data[t.valfield]=f.data("valfield_"+t.valfield)))}(u,t)},firstoption:u.nofirstoption?null:u.firstoption||{id:"",text:"===请选择==="}}),n.formatter&&p.extend(u,{formatter:null})),"textarea"==i&&p.extend(u,{multiline:!0}),u.valfield&&f.data("valfield_"+u.valfield,u.valfield.GetInstanceEx(c)),d[o](u),y(f,d,u)}}}),f.opts.optionsdatasou&&p(f).bindOptionDataByName(f.opts.optionsdatasou,"optionsdata"),p(f).bindViewValByAtr(c,"valname",f.opts.optionsdatasou,"optionsdata"),p(f).find(".editlabel-custom").each(function(){var t=p(this).attr("valname"),e=(p(this).attr("placeholder"),p(this).attr("data-options"),p(this).attr("custom-selector")),a=p(e);a.show();var i=a.attr("data-opts").GetInstance();function n(){if(a.attr("data-opts")){var t=a.attr("data-opts").GetInstance();t.getVal&&t.getVal.call(this,f.opts.data)}}i.formatter&&i.formatter.call(this,t.GetInstanceEx(f.opts.data),a),i.editelearr&&i.editelearr.length&&p(i.editelearr).each(function(t,e){a.find(e).bind("keyup",n),a.find(e).bind("change",n)}),p(this).hide()}),f.opts.validateform&&f.opts.validateformopts&&p(f).validateform(f.opts.validateformopts),p(f.opts.confirmbtn).unbind(),p(f.opts.confirmbtn).click(function(){if(f.opts.validateform){if(!p(f).validateform("validateform",[1]))return;var t=!0;if(p(f).find(".editlabel-filegridui").each(function(){t&&(!p(this).filegridui("options").isvalid||p(this).filegridui("isValid")||(t=!1))}),!t)return}var e=f.editlabel("getData");f.opts.onConfirm&&f.opts.onConfirm.call(this,e)})}else{p(f).bindViewValByAtr(c,"valname",f.opts.optionsdatasou,"optionsdata");t=p(f).find("[class*=editlabel-]");p(t).each(function(t,e){p(e).show();var a=GetFieldOpts(p(e));p(e).css("word-break","break-all");var i=a.textfield.GetInstanceEx(c),n=_getEditClass(e);if(-1<p.inArray(n,h)&&(i=new Date(x(i))),a.formatter){var s=a.formatter.call(this,i,c,a,p(this));"string"==typeof s?p(e).html(s):(p(e).html(""),p(e).append(s))}else p.inArray(n,v)<0&&p(e).html(i);y(f,p(e),a)}),p(f).find(".editlabel-custom").each(function(){var t=p(this).attr("custom-selector");p(t).hide(),p(this).show()}),p(f.opts.confirmbtn).hide()}f.opts.validateform&&f.validateform(f.opts),f.opts.onLoadSuccess&&f.opts.onLoadSuccess.call(this,c,f,f.opts.editable)}p.fn.editlabel=function(e,t){if("string"==typeof e){var a=p.fn.editlabel.methods[e];if(a)return a(this,t)}e=e||{};var i=this;return i.opts=p.extend({},p.fn.editlabel.defaults,e),this.each(function(){p.data(this,"editlabel");p.ajaxSettings.async=!1,i.opts.url&&p.getJSON(i.opts.url,function(t){e.data=i.opts.data=t}),p.ajaxSettings.async=!0,i.opts.editablecol&&(!i.opts.data[i.opts.editablecol]&&i.opts.editable?i.opts.editable=!0:i.opts.editable=!1),p.data(this,"editlabel",{options:p.extend({},p.fn.editlabel.defaults,p.fn.editlabel.parseOptions(this),e),initobj:n(i)})})},p.fn.editlabel.methods={options:function(t){return p.data(t[0],"editlabel").options},getData:function(d){try{var t=void 0,u=p.data(d[0],"editlabel");if(u&&u.options){var e=_getEditors(d);p(e).each(function(t,e){var a=p(e),i=p(e).val(),n=_getEditClass(e,"easyui-"),s=GetFieldOpts(a);if(s.showonly&&(i=s.textfield?s.textfield.GetInstanceEx(u.options.data):a.val()),a.attr("readonly")&&(i=a.val()),-1<p.inArray(n,g)&&(i=p(e)[n]("getValue"),-1<p.inArray(n,h)&&(i=x(i))),"checkbox"==n){i=s.retIsArr?[]:"";var o=s.space||",",r=p(e).find("input:checkbox:checked");p.each(r,function(t,e){if(s.retIsArr){var a=p(this).data("checkorradiodata");i.push(a||p(this).val())}else i+=p(this).val()+(r.length==t+1?"":o)})}if("radio"==n){var l=p(e).find("input:radio:checked");l&&0<l.length&&(i=p(l[0]).val())}"numberbox"!=n||i||(i=0),"filegridui"==n&&(i=p(e).filegridui("getData")),"string"==typeof i&&(i=p.trim(i)),s&&s.getVal?s.valfield?s.getVal.call(this,u.options.data,i,d.data("valfield_"+s.valfield)):s.getVal.call(this,u.options.data,i):s.textfield.indexOf(".")<0&&s.textfield.indexOf("[")<0&&(u.options.data[s.textfield]=i,s.valfield&&(u.options.data[s.valfield]=d.data("valfield_"+s.valfield)))}),t=u.options.data,u.options.onGetDataEnd&&u.options.onGetDataEnd.call(this,t)}return t}catch(t){console.error("editlabel getData error:",t)}},getEditors:_getEditors,getEditor:function(t,s){var o=void 0,e=p(t).find("[class*=editlabel-]");return p(e).each(function(t,e){var a=GetFieldOpts(p(e)).textfield,i=p(e).next();(!i||i.length<1)&&(i=p(e));var n=GetFieldOpts(i).textfield;if(i&&0<i.length&&a===n){if(void 0===s)return o=i[0],!1;if("object"==typeof s&&s.editorid&&s.editorid===i.id&&s.valname&&s.valname===n)return o=i[0],!1;if("object"==typeof s&&s.editorid&&s.editorid===i.id&&!s.valname)return o=i[0],!1;if("object"==typeof s&&s.valname&&s.valname===n&&!s.editorid)return o=i[0],!1;if("string"==typeof s&&s===n)return o=i[0],!1}}),o},removeMustfill:function(t,e){var a=p.data(t[0],"editlabel");if("string"==typeof e&&(e.editorfield=e),a){var i=a.options,n=p(t[0]).editlabel("getEditor",e.editorfield);_getEditClass(n,"easyui-");e.stage&&(i.stage=e.stage),i.mustFillSelector.call(n).find(".el-title-mustfill").remove(),p(n).validatebox({stage:e.stage})}},appendMustfill:function(t,e){var a=p.data(t[0],"editlabel");if("string"==typeof e&&(e.editorfield=e),a){var i=a.options,n=p(t[0]).editlabel("getEditor",e.editorfield);_getEditClass(n,"easyui-");e.stage&&(i.stage=e.stage);var s=i.mustFillSelector.call(n);s.prepend(p(i.mustFillEle)),s.addClass("el-title"),i.mustFillClass&&s.addClass(i.mustFillClass),p(n).validatebox({stage:e.stage})}},reload:function(t,e){var a=p.data(t[0],"editlabel").options;return a=p.extend(a,e),t.opts=a,t.each(function(){p.data(this,"editlabel",{options:a,initobj:n(t)})})}},p.fn.editlabel.parseOptions=function(t){return p.extend({},p.parser.parseOptions(t,[]))},p.fn.editlabel.defaults={url:null,data:{},confirmbtn:null,editable:!1,editablecol:null,validateform:!0,optionsdatasou:null,isMustFillStyle:!1,mustFillEle:'<span class="el-title-mustfill">*</span>',mustFillClass:null,mustFillLabel:null,mustFillSelector:function(){return p(this).parent().prev()},onLoadSuccess:function(t,e,a){},onGetDataEnd:function(t){}}}(jQuery),$(function(){$(".easyui-editlabel").each(function(){var t={},e=$.trim($(this).attr("data-options"));e&&("{"!==e.substring(0,1)&&(e="{"+e+"}"),t=new Function("return "+e)(),$(this).editlabel(t))})});
//# sourceMappingURL=jquery.moreeasyui.min.js.map